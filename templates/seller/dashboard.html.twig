{% extends 'base.html.twig' %}

{% block title %}Seller Dashboard
{% endblock %}

{% block stylesheets %}
	<link rel="stylesheet" href="{{ asset('css/seller.css') }}">
{% endblock %}

{% block body %}
	<div
		class="container-fluid py-4" style="background-color: #f8f9fa;">
		<!-- Dashboard Header -->
		<div class="container">
			<div class="d-flex justify-content-between align-items-center mb-4">
				<div>
					<h1 class="mb-2 fw-bold">
						<span class="material-icons-outlined me-2" style="font-size: 3rem; vertical-align: middle; position: relative; top: -2px;">
							dashboard
						</span>
						Seller Dashboard
					</h1>
					<p class="text-muted mb-0" style="padding-top: 5px">Manage your products and track your shop performance</p>
				</div>
			</div>

			<!-- Products Management Section -->
			<div class="card border-0 shadow-sm">
				<div class="card-header bg-white border-0 py-3">
					<div class="d-flex justify-content-between align-items-center">
						<div>
							<h5 class="mb-1 fw-bold">
								<span class="material-icons-outlined me-2" style="vertical-align: middle;">
									inventory
								</span>
								Product Management
							</h5>
							<p class="text-muted mb-0">Add, edit, and manage your product catalog</p>
							<br>
						</div>
						<a href="{{ path('product_new') }}" class="btn btn-primary">
							<span class="material-icons-outlined me-2">add</span>
							Add New Product
						</a>
					</div>
				</div>
				<div class="card-body p-0">
					{% if products is defined and products|length > 0 %}
						<div class="table-responsive" style="max-height: 300px; overflow-y: auto;">
							<table class="table table-hover align-middle mb-0">
								<thead class="bg-light">
									<tr>
										<th class="ps-4 py-3 border-0">
											<span class="text-muted fw-semibold">Product</span>
										</th>
										<th class="py-3 border-0">
											<span class="text-muted fw-semibold">Price</span>
										</th>
										<th class="py-3 border-0">
											<span class="text-muted fw-semibold">Stock</span>
										</th>
										<th class="pe-4 py-3 border-0 text-center"></th>
									</tr>
								</thead>
								<tbody>
									{% for product in products %}
										<tr class="border-bottom">
											<td class="ps-4 py-3">
												<div class="d-flex align-items-center">
													<div class="me-3" style="width: 50px; height: 50px;">
														{% if product.images is defined and product.images|length > 0 %}
															{% set image = product.images[0] %}
															<img src="{{ asset('uploads/products_images/' ~ image.filename) }}" alt="{{ product.title }}" class="img-fluid rounded" style="width: 100%; height: 100%; object-fit: cover;">
														{% else %}
															<div class="bg-light rounded d-flex align-items-center justify-content-center" style="width: 100%; height: 100%;">
																<span class="material-icons-outlined text-muted">image</span>
															</div>
														{% endif %}
													</div>
													<div>
														<h6 class="mb-1 fw-semibold">{{ product.title }}</h6>
														<small class="text-muted">{{ product.category.value }}</small>
													</div>
												</div>
											</td>
											<td class="py-3">
												<span class="fw-bold text-success">${{ product.price }}</span>
											</td>
											<td class="py-3">
												<span class="badge bg-success bg-opacity-50" style="font-size: 100%;">{{ product.stockQuantity }}</span>
											</td>
											<td class="pe-4 py-3 text-center">
												<div class="btn-group" role="group">
													<a href="{{ path('product_edit', {id: product.id}) }}" class="btn btn-sm btn-outline-primary" title="Edit Product" style="margin-right: 5px;">
														<span class="material-icons-outlined">edit</span>
													</a>
													<a href="{{ path('product_show', {id: product.id}) }}" class="btn btn-sm btn-outline-info" title="View Product">
														<span class="material-icons-outlined">visibility</span>
													</a>
													{{ include('product/_delete_form.html.twig', {product: product}) }}
												</div>
											</td>
										</tr>
									{% endfor %}
								</tbody>
							</table>
						</div>
					{% else %}
						<div class="text-center py-5">
							<div class="mb-4">
								<span class="material-icons-outlined text-muted" style="font-size: 4rem;">inventory_2</span>
							</div>
							<h5 class="fw-bold mb-2">No Products Yet</h5>
							<p class="text-muted mb-4">You haven't added any products to your shop yet. Start by adding your first product!</p>
							<a href="{{ path('product_new') }}" class="btn btn-primary">
								<span class="material-icons-outlined me-2">add</span>
								Add Your First Product
							</a>
						</div>
					{% endif %}
				</div>
			</div>
		</div>
	</div>
{% endblock %}
