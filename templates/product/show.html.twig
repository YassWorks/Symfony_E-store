{% extends 'base.html.twig' %}

{% block title %}{{ product.title }}{% endblock %}

{% block body %}
<div class="container py-4">
  <div class="row">
    <div class="col-md-6">
    {% if product.images|length > 0 %}
      {% set image = product.images[0] %}
        <img src="{{ asset('uploads/shop_logos/' ~ image.filename) }}" alt="{{ product.title }}">
    {% else %}
      <img src="{{ asset('uploads/default.jpg') }}" alt="No image">
    {% endif %}
    </div>
    <div class="col-md-6">
      <h2>{{ product.title }}</h2>
      <p><strong>Category:</strong> {{ product.category.value }}</p>
      <p><strong>Price:</strong> ${{ product.price }}</p>
      <p><strong>Stock:</strong> {{ product.stockQuantity }}</p>
      <p>{{ product.description }}</p>
      <a href="{{ path('product_edit', {id: product.id}) }}" class="btn btn-warning">Edit</a>
      {{ include('product/_delete_form.html.twig', {product: product}) }}
      {% if is_granted('ROLE_BUYER') %}
      
      <form method="post" action="{{ path('cart_add', { id: product.id }) }}" class="d-flex align-items-center mt-3">
        <input
          type="number"
          name="quantity"
          value="1"
          min="1"
          class="form-control w-auto me-2"
        />
        <button class="btn btn-primary">Add to Cart</button>
      </form>
    
    {% endif %}
    </div>
  </div>
</div>
{% endblock %}
